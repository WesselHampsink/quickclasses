"use strict";class QuickFilter{constructor({elementSelector:t="[data-index]",filterCheckboxInputs:e=[],filterSelectInputs:l=[],filterTextInputs:s=[],filterRangeInputs:i=[],filterRadioInputs:r=[],filterStartTextInputs:a=[],resultNumberSelector:h=null,noResultMessage:n=null,showDisplayProperty:o="block",hideDisplayProperty:u="none",callBackFunction:c=null,modifySelectedFunction:p=null,itemsScope:f=null}){this.elementSelector=t,this.showDisplayProperty=o,this.hideDisplayProperty=u,this.itemsScope=null===f?document:document.querySelector(f),this.allResults=this.itemsScope.querySelectorAll(this.elementSelector),this.noResult=document.querySelector(n),this.counterElement=document.querySelector(h),this.showCounter=this.allResults.length,this.allInputs=document.querySelectorAll("[data-filter]"),"object"!=typeof e&&"array"!=typeof e||(this.filterCheckboxInputs=e),"object"!=typeof l&&"array"!=typeof l||(this.filterSelectInputs=l),"object"!=typeof a&&"array"!=typeof a||(this.filterStartTextInputs=a),"object"!=typeof s&&"array"!=typeof s||(this.filterTextInputs=s),"object"!=typeof i&&"array"!=typeof i||(this.filterRangeInputs=i),"object"!=typeof r&&"array"!=typeof r||(this.filterRadioInputs=r),this.callBackFunction=c,this.modifySelectedFunction=p,this.allInputs.forEach(t=>{t.addEventListener("change",()=>{this.inputCallback()}),t.addEventListener("keyup",()=>{this.inputCallback()})}),this.getAllDataSets(),this.showAmountResults(),this.inputCallback()}getAllDataSets(){return this.allDataSets=new Array,this.allResults.forEach(t=>{this.allDataSets.push(Object.assign({},t.dataset))}),this.allDataSets}showAll(){this.allResults.forEach(t=>t.style.display=this.showDisplayProperty),this.showCounter=this.allResults.length}hideAll(){null!=this.noResult&&(this.noResult.style.display=this.hideDisplayProperty),this.allResults.forEach(t=>t.style.display=this.hideDisplayProperty),this.showCounter=0}showNoResultMessage(){null!==this.noResult&&(this.noResult.style.display=this.showDisplayProperty)}showThisItem(t){this.itemsScope.querySelector('[data-index="'+t+'"]').style.display=this.showDisplayProperty,this.showCounter++}textStartsWithFilter(t,e){let l=this.allFilters[t].toString().toLowerCase();return!!e.toLowerCase().startsWith(l)}textFilter(t,e){let l=this.allFilters[t].toString().toLowerCase();return-1!==e.toLowerCase().indexOf(l)}rangeFilter(t,e){let l=this.allFilters[t][0],s=this.allFilters[t][1];if(e.indexOf(",")>-1){let t=e.split(","),i=parseFloat(t[1]),r=parseFloat(t[0]);return i<=s&&r>=l}return parseFloat(e)>=l&&parseFloat(e)<=s}checkSelect(t,e){return-1!==e.indexOf(",")?this.allFilters[t].some(t=>e.split(",").includes(t)):this.allFilters[t]==e}checkFilter(t,e){if(!e||""===e)return!1;let l=this.allFilters[t].toString().toLowerCase().split(","),s=e.toLowerCase();return l.some(t=>s.indexOf(t)>=0)}radioFilter(t,e){return this.allFilters[t]==e}filterFunction(){this.hideAll(),this.allDataSets.forEach(t=>{let e=[];for(var[l,s]of Object.entries(this.allFilters))e[l]=!0;for(var[l,s]of Object.entries(this.allFilters))if(null!==s)if(this.filterCheckboxInputs.includes(l))e[l]=this.checkFilter(l,t[l]);else if(this.filterSelectInputs.includes(l))e[l]=this.checkSelect(l,t[l]);else if(this.filterStartTextInputs.includes(l))e[l]=this.textStartsWithFilter(l,t[l]);else if(this.filterTextInputs.includes(l))e[l]=this.textFilter(l,t[l]);else if(this.filterRadioInputs.includes(l))e[l]=this.radioFilter(l,t[l]);else if(this.filterRangeInputs.includes(l)){if(this.allFilters[l][0]==this.allFilters[l][2]&&this.allFilters[l][1]==this.allFilters[l][3])continue;e[l]=this.rangeFilter(l,t[l])}Object.keys(e).every(t=>e[t])&&this.showThisItem(t.index)})}showAmountResults(){if(null!==this.counterElement)return this.counterElement.textContent=this.showCounter,this.showCounter}checkIfAllEmpty(){return!!Object.values(this.allFilters).every(t=>null===t||""===t)&&(this.showAll(),!0)}getAllSelectedFilters(){this.allFilters=new Object,this.allInputs.forEach(t=>{this.allFilters[t.dataset.filter]=null})}inputCallback(){this.getAllSelectedFilters(),this.allInputs.forEach(t=>{if(null==t.value||null==t.value||""==t.value)return;if("checkbox"==t.type&&!t.checked)return;let e=t.dataset.filter;if(null==this.allFilters[e]&&(this.allFilters[e]=[]),"radio"==t.type&&this.filterRadioInputs.includes(t.dataset.filter))1==t.checked&&(this.allFilters[e]=t.value);else if(!t.multiple||"select"!=t.tagName&&"SELECT"!=t.tagName)if(t.multiple&&"range"==t.type){if(t.classList.contains("ghost"))return;this.allFilters[e].push(...t.value.split(",")),this.allFilters[e].push(t.min),this.allFilters[e].push(t.max)}else this.allFilters[e].push(t.value);else{let l=Array.from(t.querySelectorAll("option:checked")).map(t=>t.value);this.allFilters[e].push(...l)}this.filterRadioInputs.includes(t.dataset.filter)&&0==this.allFilters[e].length&&(this.allFilters[e]=null)}),null!==this.modifySelectedFunction&&(this.allFilters=this.modifySelectedFunction(this.allFilters)),this.filterFunction(),0!==this.showCounter||this.checkIfAllEmpty(this.allFilters)||this.showNoResultMessage(),this.showAmountResults(),null!==this.callBackFunction&&this.callBackFunction()}}